name: Validator tests
on: pull_request
jobs:
  validator-tests:
    name: send test to validator
    runs-on: ubuntu-latest
    steps:
        - name: get current branch name
          id: vars
          run: echo ::set-output name=short_ref::${GITHUB_REF#refs/*/}
        - name: send module to validator
          uses: PrestaShopCorp/github-action-validator@add-sf-and-continue-logic
          env:
            VALIDATOR_API_KEY: ${{ secrets.VALIDATOR_API_KEY }}
          with:
            github_link: PrestaShopSellerExtensions/${{ github.event.repository.name }}
            github_branch: ${{github.head_ref}}
        - name: comment PR
          uses: machine-learning-apps/pr-comment@master
          env:
            GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          with:
            path: ./result_validator.txt